<h1>{{id}}</h1>
{{name}}

<link rel="stylesheet" href="../stylesheets/details.css">


<div class="slideshow-container">
{{#each images}}
<div class="mySlides fade">
  <div class="numbertext">1 / 6</div>
  <img src="/images/{{this}}" style="width:100%">
  <div class="text">Caption One</div>
</div>
{{/each}}


<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
<a class="next" onclick="plusSlides(1)">&#10095;</a>

</div>
<br>

<div style="text-align:center">
  <span class="dot" onclick="currentSlide(1)"></span> 
  <span class="dot" onclick="currentSlide(2)"></span> 
  <span class="dot" onclick="currentSlide(3)"></span> 
  <span class="dot" onclick="currentSlide(4)"></span>
  <span class="dot" onclick="currentSlide(5)"></span>
  <span class="dot" onclick="currentSlide(6)"></span>
</div>


<button onclick="myFunction()">Try it</button>


<section id="myDIV" >
   <form action="" method="post">
<div class="container">
    <div class="row">
      <div class="col-25">
        <label for="story">Let the story begin...</label>
      </div>
      <div class="col-75">
       
          <fieldset>
      <legend>Title</legend>
         <label for="title1">
              <input type="radio" id="title1" name="title" value="M."> Mister</label>
           <label for="title2">
              <input type="radio" id="title2" name="title" value="Ms.">Miss </label>
            <label for="title3">
              <input type="radio" id="title3" name="title" value="Mx.">Mx </label>
      </fieldset>
      </div>
    </div>
  
   <div class="row">
      <div class="col-25">
        <label for="fullname">Name</label>
      </div>
      <div class="col-75">
        <input type="text" id="fullname" name="fullname" placeholder="Give it a kick-ass name...">
      </div>
    </div>
  <br>
   <label for="creaturesize">Creature Size</label><br>
      <input type="radio" name="size" value="Similar to human" checked> Similar to human
  <input type="radio" name="size" value="Triple human"> Triple human
  <input type="radio" name="size" value="Whale scale"> Whale scale  
  <input type="radio" name="size" value="other">Other 
  <input type="text" name="size" placeholder="If other, enter information"/>
  
  
  <br><br>
   <label for="habitate">Dominant Habitate</label><br>
      <input type="radio" name="habitate" value="Sea" checked>Sea
  <input type="radio" name="habitate" value="Land">Land
  <input type="radio" name="habitate" value="Air"> Air 
  <input type="radio" name="habitate" value="other">Other 
  <input type="text" name="habitate" placeholder="If other, enter information"/>
  
  <br><br>
   <label for="ability">Prominent Abilities</label><br>
      <input type="radio" name="ability" value="one" checked>one
  <input type="radio" name="ability" value="two">two
  <input type="radio" name="ability" value="three"> three 
  <input type="radio" name="ability" value="other">Other 
  <input type="text" name="ability" placeholder="If other, enter information"/>
  
  <br><br>
   <label for="intellect">Intellectual Highness</label><br>
      <input type="radio" name="intellect" value="one" checked>one
  <input type="radio" name="intellect" value="two">two
  <input type="radio" name="intellect" value="three"> three 
  <input type="radio" name="intellect" value="other">Other 
  <input type="text" name="intellect" placeholder="If other, enter information"/>
  
  <br><br>
   <label for="reproduction">Reproduction</label><br>
      <input type="radio" name="reproduction" value="Asexual" checked>Asexual
  
 <select>
  <option name="reproduction" value="binary fission">Binary fission</option>
  <option name="reproduction" value="budding">Budding</option>
  <option name="reproduction" value="Parthenogenesis">Parthenogenesis</option>
  <option name="reproduction" value="Fragmentation">Fragmentation</option>
</select>
   
  <input type="radio" name="reproduction" value="Sexual" checked>Sexual
  <select>
  <option name="reproduction" value="one">one</option>
  <option name="reproduction" value="two">two</option>
  <option name="reproduction" value="three">three</option>
  <option name="reproduction" value="four">four</option>
</select>
  <input type="text" name="reproduction" placeholder="If other, enter information"/>
  
  
  <br><br>
   <label for="stress">Environmental Stress/Damage</label><br>
  <input type="radio" name="stress" value="noise" checked>Noise
  <input type="radio" name="stress" value="crowding">Crowding
  <input type="radio" name="stress" value="air quality"> Air quality 
  <input type="radio" name="stress" value="Tornadoes and other natural disasters."> Tornadoes and other natural disasters. 
  <input type="radio" name="stress" value="War and other manmade disasters.
"> War and other manmade disasters.
 
  <input type="radio" name="stress" value="Light"> Light 
  <input type="radio" name="stress" value="ultraviolet radiation"> Ultraviolet radiation 
  <input type="radio" name="stress" value="genetic modification"> genetic modification 
 <input type="radio" name="stress" value="other">Other 
  <input type="text" name="stress" placeholder="If other, enter information"/>
  
  <br><br>
  <div class="row">
      <div class="col-25">
        <label for="bodyparts">Significant Bodyparts</label>
      </div>
      <div class="col-75">
        <input type="text" id="bodyparts" name="bodyparts" placeholder="Part One..">
        <input type="text" id="bodyparts" name="bodyparts" placeholder="Part Two..">
        <input type="text" id="bodyparts" name="bodyparts" placeholder="Part Three..">
      </div>
    </div>
  
  <br>
    <div class="row">
      <div class="col-25">
        <label for="disturb">Disturbing Facts</label>
      </div>
      <div class="col-75">
        <textarea id="disturb" name="disturb" placeholder="Write the most disturbing things that came to your mind..." style="height:200px"></textarea>
      </div>
    </div>
    <div class="row">
      <input type="submit" value="Submit">
    </div>
  </div>



  <div class="recording">

	<span>Recorder</span>
	<audio id="recorder" muted hidden></audio>
	<div>
		<button id="start">Record</button>
		<button id="stop">Stop Recording</button>
	</div>
	<span>Saved Recording</span>
	<audio id="player" controls></audio>
</div>


</form> 
</section>






<!--
  loop through stories array and show stuff
  format form to be correct

-->
{{#each stories}}
<div class="storyLayout">
  
  This is the beginning of something great, {{this.title}} {{fullname}} is this beauty you're looking at.<br>

  It's about {{this.size}} big and generally live at {{this.habitate}}.<br>
 They are capable of {{this.ability}} and have the intellectual level of {{this.intellect}}.<br>
Reproduction is through {{this.reproduction}}. <br>
Reasons that they have come to this form of being are due to {{this.stress}}.<br>
  {{this.bodyparts}}<br>
  Something disturbing to learn as well to be entertained are {{this.disturb}}.
  Perfect.
  
</div>
{{/each}}





<script>
var slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  var i;
  var slides = document.getElementsByClassName("mySlides");
  var dots = document.getElementsByClassName("dot");
  if (n > slides.length) {slideIndex = 1}    
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";  
  }
  for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";  
  dots[slideIndex-1].className += " active";
}



//hide button

function myFunction() {
  var x = document.getElementById("myDIV");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}

//recorder


class VoiceRecorder {
	constructor() {
		if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
			console.log("getUserMedia supported")
		} else {
			console.log("getUserMedia is not supported on your browser!")
		}

		this.mediaRecorder
		this.stream
		this.chunks = []
		this.isRecording = false

		this.recorderRef = document.querySelector("#recorder")
		this.playerRef = document.querySelector("#player")
		this.startRef = document.querySelector("#start")
		this.stopRef = document.querySelector("#stop")
		
		this.startRef.onclick = this.startRecording.bind(this)
		this.stopRef.onclick = this.stopRecording.bind(this)

		this.constraints = {
			audio: true,
			video: false
		}
		
	}

	handleSuccess(stream) {
		this.stream = stream
		this.stream.oninactive = () => {
			console.log("Stream ended!")
		};
		this.recorderRef.srcObject = this.stream
		this.mediaRecorder = new MediaRecorder(this.stream)
		console.log(this.mediaRecorder)
		this.mediaRecorder.ondataavailable = this.onMediaRecorderDataAvailable.bind(this)
		this.mediaRecorder.onstop = this.onMediaRecorderStop.bind(this)
		this.recorderRef.play()
		this.mediaRecorder.start()
	}

	handleError(error) {
		console.log("navigator.getUserMedia error: ", error)
	}
	
	onMediaRecorderDataAvailable(e) { this.chunks.push(e.data) }
	
	onMediaRecorderStop(e) { 
			const blob = new Blob(this.chunks, { 'type': 'audio/ogg; codecs=opus' })
			const audioURL = window.URL.createObjectURL(blob)
			this.playerRef.src = audioURL
			this.chunks = []
			this.stream.getAudioTracks().forEach(track => track.stop())
			this.stream = null
	}

	startRecording() {
		if (this.isRecording) return
		this.isRecording = true
		this.startRef.innerHTML = 'Recording...'
		this.playerRef.src = ''
		navigator.mediaDevices
			.getUserMedia(this.constraints)
			.then(this.handleSuccess.bind(this))
			.catch(this.handleError.bind(this))
	}
	
	stopRecording() {
		if (!this.isRecording) return
		this.isRecording = false
		this.startRef.innerHTML = 'Record'
		this.recorderRef.pause()
		this.mediaRecorder.stop()
	}
	
}

window.voiceRecorder = new VoiceRecorder()


</script>

